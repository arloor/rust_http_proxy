{
    // https://mcr.microsoft.com/en-us/catalog?search=devcontainers
    "image": "mcr.microsoft.com/devcontainers/base:ubuntu-22.04",
    "name": "rust_http_proxy",
    "containerUser": "root", // postCreateCommand中命令需要root权限
    "remoteUser": "root",
    "privileged": true,
    "features": {
        "ghcr.io/devcontainers/features/rust:1": {}
    },
    "postCreateCommand": {
        "ssh_config":"mkdir -p ~/.ssh;echo \"$SSH_PRIVATE\" > ~/.ssh/id_rsa;chmod 0400 ~/.ssh/id_rsa;",
        "apt install":"apt update;apt-get install -y libz-dev libelf-dev pkg-config clang",
        "chown root":"chown -R root /workspaces",
        // "git config":"git config --global --unset http.proxy;git config --global --unset https.proxy;git config --global --list"
    }, // 容器创建后的初始化命令
    "hostRequirements": {
        "cpus": 2,
        "memory": "16gb"
    }, // 容器的资源要求
    "containerEnv": {
        "http_proxy":"",
        "https_proxy":"",
        "HTTP_PROXY":"",
        "HTTPS_PROXY":""
    },
    "customizations": {
        "codespaces": {
            "openFiles": [
                "rust_http_proxy/rust_http_proxy/src/main.rs"
            ]
        }, // 打开的文件
        "vscode": {
            "extensions": [ // 定义要装哪些插件
                "vadimcn.vscode-lldb", // 调试插件
                "rust-lang.rust-analyzer", // rust语言支持
                "github.copilot",
                "github.vscode-github-actions", // github actions
                "tamasfe.even-better-toml", // toml格式化
                "serayuzgur.crates", // crates.io插件
                "waderyan.gitblame",
                "donjayamanne.githistory"
            ],
            "settings": {
                "files.watcherExclude": {
                    "**/target/**": true
                }
            }
        }
    }
}